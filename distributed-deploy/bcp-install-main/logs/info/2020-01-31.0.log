2020-01-31 12:27:45.641 [main] INFO  o.s.b.t.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [InitTest], using SpringBootContextLoader
2020-01-31 12:27:45.657 [main] INFO  o.s.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [InitTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2020-01-31 12:27:46.485 [main] INFO  o.s.b.t.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener]
2020-01-31 12:27:46.610 [main] INFO  o.s.b.t.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2cdd0d4b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7e9131d5, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2e1d27ba, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@61d6015a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2525ff7e, org.springframework.test.context.transaction.TransactionalTestExecutionListener@524d6d96, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@152aa092, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@44a7bfbc, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4ef37659, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@776b83cc, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@37858383, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@4e268090]
2020-01-31 12:27:48.016 [main] INFO  InitTest - Starting InitTest on DESKTOP-7VAN58A with PID 2160 (started by Ddpool in F:\space30\bcp-app-install\bcp-install-main)
2020-01-31 12:27:48.016 [main] INFO  InitTest - The following profiles are active: dev
2020-01-31 12:27:48.078 [main] INFO  o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@658c5a19: startup date [Fri Jan 31 12:27:48 CST 2020]; root of context hierarchy
2020-01-31 12:27:51.297 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-01-31 12:27:51.953 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$a065ed84] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-31 12:27:52.344 [main] INFO  com.cgb.bcpinstall.common.util.HttpClientUtil - HttpClientUtil init. poolsize:30, socketTimeout:60000, connectTimeout:60000, connectionRequestTimeout:60000, defaultMaxPerRoute:10
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/remove],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.doRemove(javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/pushPackage],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.pushInstallPackage(javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/backendStatus],methods=[GET],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.checkBackendStatus(javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/end],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.endInstall(com.cgb.bcpinstall.common.entity.EndCmd)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/start],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.doInstall(com.cgb.bcpinstall.common.entity.InstallCmd,javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/getPackage/{os}],produces=[application/json;charset=UTF-8]}" onto public void com.cgb.bcpinstall.api.controller.InstallController.getInstallData(java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/finished],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.installFinished(com.cgb.bcpinstall.common.entity.InstallResult,javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/install/update],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.InstallController.doUpdate(javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.063 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/v1/reg/role],methods=[POST],produces=[application/json;charset=UTF-8]}" onto public com.cgb.bcpinstall.common.response.HttpInstallResponse com.cgb.bcpinstall.api.controller.RegisterController.regRole(com.cgb.bcpinstall.common.entity.RoleRegEntity,javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.079 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/swagger-resources/configuration/security]}" onto public org.springframework.http.ResponseEntity<springfox.documentation.swagger.web.SecurityConfiguration> springfox.documentation.swagger.web.ApiResourceController.securityConfiguration()
2020-01-31 12:27:53.079 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/swagger-resources]}" onto public org.springframework.http.ResponseEntity<java.util.List<springfox.documentation.swagger.web.SwaggerResource>> springfox.documentation.swagger.web.ApiResourceController.swaggerResources()
2020-01-31 12:27:53.079 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/swagger-resources/configuration/ui]}" onto public org.springframework.http.ResponseEntity<springfox.documentation.swagger.web.UiConfiguration> springfox.documentation.swagger.web.ApiResourceController.uiConfiguration()
2020-01-31 12:27:53.079 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2020-01-31 12:27:53.079 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2020-01-31 12:27:53.313 [main] INFO  o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/swagger-ui.html] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2020-01-31 12:27:53.313 [main] INFO  o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2020-01-31 12:27:53.532 [main] INFO  com.cgb.bcpinstall.main.config.WebConfiguration - configureMessageConverters........
2020-01-31 12:27:53.547 [main] INFO  c.c.bcpinstall.common.fastJson.BaseFastJsonConfig - fastJsonHttpMessageConverter........
2020-01-31 12:27:53.641 [main] INFO  c.c.bcpinstall.common.fastJson.BaseFastJsonConfig - getFastJsonConfig.....
2020-01-31 12:27:53.922 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@658c5a19: startup date [Fri Jan 31 12:27:48 CST 2020]; root of context hierarchy
2020-01-31 12:27:54.047 [main] INFO  s.d.s.w.PropertySourcedRequestMappingHandlerMapping - Mapped URL path [/v2/api-docs] onto method [public org.springframework.http.ResponseEntity<springfox.documentation.spring.web.json.Json> springfox.documentation.swagger2.web.Swagger2Controller.getDocumentation(java.lang.String,javax.servlet.http.HttpServletRequest)]
2020-01-31 12:27:55.063 [main] INFO  o.s.context.support.DefaultLifecycleProcessor - Starting beans in phase 2147483647
2020-01-31 12:27:55.063 [main] INFO  s.d.s.web.plugins.DocumentationPluginsBootstrapper - Context refreshed
2020-01-31 12:27:55.110 [main] INFO  s.d.s.web.plugins.DocumentationPluginsBootstrapper - Found 1 custom documentation plugin(s)
2020-01-31 12:27:55.157 [main] INFO  s.d.spring.web.scanners.ApiListingReferenceScanner - Scanning for api listing references
2020-01-31 12:27:55.438 [main] INFO  InitTest - Started InitTest in 8.687 seconds (JVM running for 10.908)
2020-01-31 12:27:55.438 [main] INFO  com.cgb.bcpinstall.main.MainApplication - bcp-app-install 完成资源初始化
2020-01-31 12:27:55.454 [main] INFO  com.cgb.bcpinstall.main.MainApplication - ***  cryptogen工具本地路径为：F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\tools/windows/cryptogen.exe
2020-01-31 12:27:55.454 [main] INFO  com.cgb.bcpinstall.main.MainApplication - ***  configtxgen工具本地路径为：F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\tools/windows/configtxgen.exe
2020-01-31 12:27:55.454 [main] INFO  com.cgb.bcpinstall.main.MainApplication - ***  configtxlator工具本地路径为：F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\tools/windows/configtxlator.exe
2020-01-31 12:27:55.688 [main] INFO  com.cgb.bcpinstall.biz.InitializeBiz - 当前机构状态为：1
2020-01-31 12:27:55.720 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 chaincodeendorsementpolicy.yaml 文件成功
2020-01-31 12:27:55.782 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 configtx.yaml 文件成功
2020-01-31 12:27:55.782 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成配置文件，当前机构状态为:1
2020-01-31 12:27:55.813 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 crypto-config.yaml 文件成功
2020-01-31 12:27:56.407 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\tools/windows/cryptogen.exe
2020-01-31 12:27:56.423 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - 
2020-01-31 12:27:56.423 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - ##########################################################
2020-01-31 12:27:56.423 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - ############### 使用 cryptogen 工具创建证书 ##############
2020-01-31 12:27:56.423 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - ##########################################################
2020-01-31 12:27:56.454 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\generate.sh: line 31: chomod: command not found
2020-01-31 12:27:56.720 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - + 'F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\tools/windows/cryptogen.exe' generate --config=./crypto-config.yaml
2020-01-31 12:27:57.885 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - bcp.com
2020-01-31 12:27:58.175 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - [31m2020-01-31 12:27:58.134 CST [bccsp_sw] storePrivateKey -> ERRO 001[0m Failed storing private key [b3bec1b31ba81a1861469c233396b1527099c4a72cd26e3c90f281120ffbd92c]: [open crypto-config\ordererOrganizations\bcp.com\orderers\orderer.bcp.com\msp\keystore\b3bec1b31ba81a1861469c233396b1527099c4a72cd26e3c90f281120ffbd92c_sk: The system cannot find the path specified.]
2020-01-31 12:27:58.186 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - Error generating local MSP for {orderer orderer.bcp.com       [orderer.bcp.com orderer]}:
2020-01-31 12:27:58.186 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - Failed storing key [ECDSAP256]: Failed storing ECDSA private key [open crypto-config\ordererOrganizations\bcp.com\orderers\orderer.bcp.com\msp\keystore\b3bec1b31ba81a1861469c233396b1527099c4a72cd26e3c90f281120ffbd92c_sk: The system cannot find the path specified.]
2020-01-31 12:27:58.204 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - 创建证书失败...
2020-01-31 12:27:58.204 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - + res=1
2020-01-31 12:27:58.204 [process stream reader] INFO  com.cgb.bcpinstall.common.util.ProcessUtil - + set +x
2020-01-31 12:27:58.235 [main] ERROR com.cgb.bcpinstall.biz.helper.Initializer - 创建证书失败
2020-01-31 12:27:59.141 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 docker-compose-orderer.yaml 文件成功
2020-01-31 12:27:59.141 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 orderer.properties 文件成功
2020-01-31 12:27:59.172 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 扩容节点其他节点的host:peer1.bcp.com
2020-01-31 12:27:59.704 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 扩容节点其他节点的host:peer0.bcp.com
2020-01-31 12:28:00.204 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 新节点生成docker-compose文件路径:F:\space30\bcp-app-install\bcp-install-main\resources/generateInstallPackage/masterPackage/\fabric-net/dockerFile/peer-127.0.0.1/docker-compose-peer.yaml
2020-01-31 12:28:00.204 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 docker-compose-peer.yaml 文件成功
2020-01-31 12:28:00.204 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 开始创建 backend 相关文件
2020-01-31 12:28:00.235 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 initData.yaml 文件成功
2020-01-31 12:28:00.250 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 network-config.json 文件成功
2020-01-31 12:28:00.250 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 bcsconfig.properties 文件成功
2020-01-31 12:28:00.266 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 start-backend.sh 文件成功
2020-01-31 12:28:00.282 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 vue.config.js 文件成功
2020-01-31 12:28:00.282 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 start-web.sh 文件成功
2020-01-31 12:28:00.282 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 collections_config.json 文件成功
2020-01-31 12:28:00.438 [main] INFO  com.cgb.bcpinstall.biz.helper.Initializer - 生成 application.yml 文件成功
2020-01-31 12:28:00.438 [Thread-2] INFO  o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@658c5a19: startup date [Fri Jan 31 12:27:48 CST 2020]; root of context hierarchy
2020-01-31 12:28:00.454 [Thread-2] INFO  o.s.context.support.DefaultLifecycleProcessor - Stopping beans in phase 2147483647
